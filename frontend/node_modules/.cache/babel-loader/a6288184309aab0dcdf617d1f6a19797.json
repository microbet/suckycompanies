{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\jayne\\\\dafuckisthis\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\jayne\\\\dafuckisthis\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\jayne\\\\dafuckisthis\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\jayne\\\\dafuckisthis\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\jayne\\\\dafuckisthis\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\jayne\\\\dafuckisthis\\\\frontend\\\\src\\\\components\\\\MainPic.js\";\nimport React, { Component } from 'react';\nimport './MainPic.css';\n\nvar MainPic =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(MainPic, _Component);\n\n  function MainPic(props) {\n    var _this;\n\n    _classCallCheck(this, MainPic);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MainPic).call(this, props));\n\n    _this.handleResize = function () {\n      if (window.innerWidth < 1000) {\n        _this.setState({\n          appClass: \"Narrow-format\",\n          picNav: \"Pic-narraow\"\n        });\n      } else {\n        _this.setState({\n          appClass: \"Wide-format\",\n          picNav: \"Pic-wide\"\n        });\n      }\n    };\n\n    _this.showModal = function () {\n      _this.setState({\n        show: true\n      });\n    };\n\n    _this.hideModal = function () {\n      _this.setState({\n        show: false\n      });\n\n      _this.fetchData();\n    };\n\n    _this.handleFileChange = function (event) {\n      _this.setState({\n        selectedFile: event.target.files[0]\n      });\n    };\n\n    _this.handleTextChange = function (event) {\n      _this.setState({\n        caption: event.target.value\n      });\n    };\n\n    _this.handleUpload = function () {\n      // this is causing mainpic to rerender and I want to avoid that\n      // so I can keep the picture in the modal and add the caption\n      // I may need to move the modal out of mainpic to do this\n      if (!_this.state.selectedFile) {\n        _this.setState({\n          warning: 'No file selected'\n        });\n\n        return;\n      } else {\n        _this.setState({\n          warning: null\n        });\n      }\n\n      var fd = new FormData();\n      fd.append('file', _this.state.selectedFile, _this.state.selectedFile.name);\n      fd.append('caption', _this.state.caption);\n      fd.append('user_id', _this.props.user.userId);\n      fd.append('sessionvalue', _this.props.user.sessionvalue);\n      fetch(_this.props.DATA_URI + '/upload_image', {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json'\n        },\n        credentials: 'same-origin',\n        body: fd\n      }).then(function (response) {\n        return response.json();\n      }).then(function (data) {\n        // it should probably ask the user if it's ok\n        // maybe the image should even be saved in a temp dir\n        // and then moved when user says ok\n        _this.setState({\n          showFileUpload: false,\n          showCaption: true,\n          showPreview: true,\n          imageId: data.image_id //  imagePath : data.imagePath,\n\n        }); // maybe this shouldn't be set yet?\n        // I think it's causing a refresh and closing the modal?\n\n\n        _this.props.image.setImageId(data.image_id);\n      }).catch(function (error) {\n        _this.setState({\n          warning: 'There was a problem uploading the file'\n        });\n      });\n    };\n\n    _this.handleCaption = function () {\n      var fd = new FormData();\n      fd.append('caption', _this.state.caption);\n      fd.append('imageId', _this.props.image.imageId);\n      fetch(_this.props.DATA_URI + '/caption', {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json'\n        },\n        credentials: 'same-origin',\n        body: fd\n      }).then(function (response) {\n        return response.json();\n      }).then(function (data) {\n        _this.setState({\n          showFileUpload: false\n        });\n\n        _this.setState({\n          capButton: 'Edit Caption'\n        });\n      }).catch(function (error) {\n        _this.setState({\n          warning: 'There was a problem adding the caption'\n        });\n      });\n    };\n\n    _this.triggerAnswers = function (trigger) {\n      _this.setState({\n        trigger: 1\n      });\n    };\n\n    _this.unTriggerAnswers = function (trigger) {\n      if (_this.state.trigger === 1) {\n        _this.setState({\n          trigger: 0\n        });\n      }\n    };\n\n    _this.handleNewImageChange = function (event) {\n      _this.setState({\n        newImageId: event.target.value\n      });\n    };\n\n    _this.setImage = function (event) {\n      event.preventDefault();\n      console.log(\"hi\");\n\n      _this.props.image.setImageId(_this.state.newImageId);\n\n      _this.setState({\n        selectedImage: ''\n      }, function () {\n        return _this.fetchData();\n      });\n    };\n\n    _this.state = {\n      show: false,\n      isLoading: true,\n      mainPicPath: '',\n      mainPicCaption: '',\n      flaskMessage: '',\n      error: null,\n      //  imageId: null,\n      selectedFile: null,\n      showFileUpload: true,\n      showCaption: false,\n      capButton: 'Submit Caption',\n      showPreview: false,\n      imagePath: null,\n      trigger: 0,\n      // selectedImage: this.props.selectedImage, // this shouldn't happen\n      selectedImage: 'latest',\n      // this shouldn't happen\n      showNext: true,\n      showPrev: true,\n      newImageId: '',\n      appClass: 'App',\n      picNav: 'Pic-wide'\n    };\n    return _this;\n  }\n\n  _createClass(MainPic, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fetchData();\n      this.handleResize();\n      window.addEventListener('resize', this.handleResize);\n    }\n  }, {\n    key: \"fetchData\",\n    value: function fetchData() {\n      var _this2 = this;\n\n      var msg = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n      fetch(this.props.DATA_URI + \"/get_image?imageId=\" + this.props.image.imageId + \"&selected_image=\" + this.state.selectedImage + \"&user_id=\" + this.props.user.userId + \"&sessionvalue=\" + this.props.user.sessionvalue, {\n        credentials: 'same-origin',\n        method: 'GET',\n        headers: {\n          'Accept': 'application/json'\n        }\n      }).then(function (response) {\n        return response.json();\n      }).then(function (data) {\n        _this2.setState({\n          mainPicPath: data.imagePath,\n          mainPicCaption: data.caption,\n          flaskMessage: data.message //           imageId : data.image_id,\n\n        });\n\n        _this2.props.image.setImageId(data.image_id);\n\n        if (data.imagePosition === 'last') {\n          _this2.setState({\n            showNext: false,\n            showPrev: true\n          });\n        } else if (data.imagePosition === 'first') {\n          _this2.setState({\n            showPrev: false,\n            showNext: true\n          });\n        } else {\n          _this2.setState({\n            showPrev: true,\n            showNext: true\n          });\n        }\n      }).catch(function (error) {\n        _this2.setState({\n          error: error,\n          isLoading: false\n        });\n\n        console.log(\"error: \", error);\n      });\n    }\n  }, {\n    key: \"renderFileUpload\",\n    value: function renderFileUpload() {\n      if (this.state.showFileUpload) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 163\n          },\n          __self: this\n        }, React.createElement(\"font\", {\n          color: \"white\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 164\n          },\n          __self: this\n        }, \"Upload new pic\"), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 164\n          },\n          __self: this\n        }), React.createElement(\"form\", {\n          onSubmit: this.handleUpload,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 165\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"file\",\n          onChange: this.handleFileChange,\n          name: \"file\",\n          id: \"file\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 166\n          },\n          __self: this\n        }), React.createElement(\"label\", {\n          htmlFor: \"file\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 167\n          },\n          __self: this\n        }, \"Choose a file\"), React.createElement(\"input\", {\n          type: \"submit\",\n          value: \"Upload\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 168\n          },\n          __self: this\n        })));\n      }\n    }\n  }, {\n    key: \"renderCaption\",\n    value: function renderCaption() {\n      if (this.state.showCaption) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 178\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"text\",\n          onChange: this.handleTextChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 179\n          },\n          __self: this\n        }), React.createElement(\"button\", {\n          onClick: this.handleCaption,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 180\n          },\n          __self: this\n        }, this.state.capButton));\n      }\n    }\n  }, {\n    key: \"previewPic\",\n    value: function previewPic() {\n      if (this.state.showPreview) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 189\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: this.props.DATA_URI + this.state.imagePath,\n          alt: \"what is it img\",\n          className: \"previewPic\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 190\n          },\n          __self: this\n        }));\n      }\n    }\n  }, {\n    key: \"handlePrevOrNext\",\n    value: function handlePrevOrNext(direction) {\n      var _this3 = this;\n\n      // should this be a component on its own to avoid unneccesary rerenders\n      // if this.state.selectedImage is user nd direction is previous or next\n      // need to get the next or previous from that user\n      // so need to send something more to api\n      if (this.state.selectedImage === 'user') {\n        direction = \"user_\" + direction;\n      }\n\n      fetch(this.props.DATA_URI + '/get_image?imageId=' + this.props.image.imageId + '&selected_image=' + direction + \"&user_id=\" + this.props.user.userId + \"&sessionvalue=\" + this.props.user.sessionvalue, {\n        method: 'GET',\n        headers: {\n          'Accept': 'application/json'\n        },\n        credentials: 'same-origin'\n      }).then(function (response) {\n        return response.json();\n      }).then(function (data) {\n        if (data.error) {\n          console.log(data.error);\n        } else {\n          _this3.setState({\n            mainPicPath: data.imagePath,\n            mainPicCaption: data.caption,\n            flaskMessage: data.message //  imageId : data.image_id,\n\n          });\n\n          _this3.props.image.setImageId(data.image_id); //  this.props.refresh();\n\n\n          if (data.imagePosition === 'last') {\n            _this3.setState({\n              showNext: false,\n              showPrev: true\n            });\n          } else if (data.imagePosition === 'first') {\n            _this3.setState({\n              showPrev: false,\n              showNext: true\n            });\n          } else {\n            _this3.setState({\n              showNext: true,\n              showPrev: true\n            });\n          } //\tthis.props.refresh();\n\n        }\n      }).catch(function (error) {\n        _this3.setState({\n          warning: 'There was a problem getting that image.'\n        });\n\n        console.log(error);\n      });\n    }\n  }, {\n    key: \"sortPic\",\n    value: function sortPic(type) {\n      var _this4 = this;\n\n      if (type === 'mostAnswers') {\n        this.setState({\n          selectedImage: 'most_answers'\n        }, function () {\n          return _this4.fetchData();\n        });\n      }\n\n      if (type === 'latest') {\n        this.setState({\n          selectedImage: 'latest'\n        }, function () {\n          return _this4.fetchData();\n        });\n      }\n\n      if (type === 'user') {\n        this.setState({\n          selectedImage: 'user'\n        }, function () {\n          return _this4.fetchData();\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      // console.log(window.document.getElementsByTagName('body')[0].clientWidth);\n      //  console.log(window.document.getElementsByTagName('body'));\n      var caption = {\n        fontWeight: 'normal',\n        fontSize: '16px',\n        fontStyle: 'italic'\n      };\n      var leftArrow = React.createElement(\"svg\", {\n        width: \"15\",\n        height: \"10\",\n        onClick: function onClick() {\n          return _this5.handlePrevOrNext(\"previous\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286\n        },\n        __self: this\n      }, React.createElement(\"line\", {\n        x1: \"0\",\n        y1: \"5\",\n        x2: \"15\",\n        y2: \"5\",\n        stroke: \"#000000\",\n        strokeWidth: \"3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287\n        },\n        __self: this\n      }), React.createElement(\"line\", {\n        x1: \"0\",\n        y1: \"5\",\n        x2: \"10\",\n        y2: \"0\",\n        stroke: \"#000000\",\n        strokeWidth: \"2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288\n        },\n        __self: this\n      }), React.createElement(\"line\", {\n        x1: \"0\",\n        y1: \"5\",\n        x2: \"10\",\n        y2: \"10\",\n        stroke: \"#000000\",\n        strokeWidth: \"2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289\n        },\n        __self: this\n      }));\n      var rightArrow = React.createElement(\"svg\", {\n        width: \"15\",\n        height: \"10\",\n        onClick: function onClick() {\n          return _this5.handlePrevOrNext(\"next\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293\n        },\n        __self: this\n      }, React.createElement(\"line\", {\n        x1: \"0\",\n        y1: \"5\",\n        x2: \"15\",\n        y2: \"5\",\n        stroke: \"#000000\",\n        strokeWidth: \"3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294\n        },\n        __self: this\n      }), React.createElement(\"line\", {\n        x1: \"15\",\n        y1: \"5\",\n        x2: \"5\",\n        y2: \"0\",\n        stroke: \"#000000\",\n        strokeWidth: \"2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295\n        },\n        __self: this\n      }), React.createElement(\"line\", {\n        x1: \"15\",\n        y1: \"5\",\n        x2: \"5\",\n        y2: \"10\",\n        stroke: \"#000000\",\n        strokeWidth: \"2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296\n        },\n        __self: this\n      }));\n      return React.createElement(\"div\", {\n        className: this.state.appClass,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: this.state.picNav,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: function onClick() {\n          _this5.sortPic('latest');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 302\n        },\n        __self: this\n      }, \"Most Recent\"), React.createElement(\"button\", {\n        onClick: function onClick() {\n          _this5.sortPic('mostAnswers');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303\n        },\n        __self: this\n      }, \"Most Answers\"), this.props.user.userId && this.state.selectedImage !== 'user' ? React.createElement(\"button\", {\n        onClick: function onClick() {\n          _this5.sortPic('user');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304\n        },\n        __self: this\n      }, \"Your Pics\") : null, this.props.user.userId && this.state.selectedImage === 'user' ? React.createElement(\"button\", {\n        onClick: function onClick() {\n          _this5.sortPic('user');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305\n        },\n        __self: this\n      }, \"All Pics\") : null, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 306\n        },\n        __self: this\n      }), this.state.showPrev ? React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307\n        },\n        __self: this\n      }, leftArrow, React.createElement(\"button\", {\n        onClick: function onClick() {\n          _this5.handlePrevOrNext('previous');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307\n        },\n        __self: this\n      }, \"Prev\"), \"\\xA0\\xA0\\xA0\") : null, \"  \", this.state.showNext ? React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307\n        },\n        __self: this\n      }, \"\\xA0\\xA0\\xA0\", React.createElement(\"button\", {\n        onClick: function onClick() {\n          _this5.handlePrevOrNext('next');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307\n        },\n        __self: this\n      }, \"Next\"), rightArrow) : null), React.createElement(\"div\", {\n        className: \"Main-image\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309\n        },\n        __self: this\n      }, this.state.mainPicPath && React.createElement(\"img\", {\n        src: this.props.DATA_URI + this.state.mainPicPath,\n        alt: \"whatisthis\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310\n        },\n        __self: this\n      })), React.createElement(\"span\", {\n        style: caption,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312\n        },\n        __self: this\n      }, this.state.mainPicCaption), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 315\n        },\n        __self: this\n      }), React.createElement(AddAnswer, {\n        DATA_URI: this.props.DATA_URI,\n        user: this.props.user,\n        imageId: this.props.image.imageId,\n        triggerAnswers: this.triggerAnswers,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 316\n        },\n        __self: this\n      }), React.createElement(Modal, {\n        show: this.state.show,\n        handleClose: this.hideModal,\n        fetchdata: this.fetchdata,\n        handleFileChange: this.handleFileChange,\n        handleUpload: this.handleUpload,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317\n        },\n        __self: this\n      }, this.renderFileUpload(), this.renderCaption(), this.previewPic()));\n      /*\r\n            <br />\r\n            <font size=\"1\">(below is just temp - enter an imageId to get that image)</font>\r\n            <form onSubmit={this.setImage}>\r\n            <input type=\"text\" onChange={this.handleNewImageChange} />\r\n            <input type=\"submit\" value=\"submit\" />\r\n            </form>\r\n            */\n    }\n  }]);\n\n  return MainPic;\n}(Component);\n\nvar Modal = function Modal(_ref) {\n  var handleClose = _ref.handleClose,\n      fetchdata = _ref.fetchdata,\n      handleFileChange = _ref.handleFileChange,\n      handleUpload = _ref.handleUpload,\n      show = _ref.show,\n      children = _ref.children;\n  var showHideClassName = show ? \"modal display-block\" : \"modal display-none\";\n  return React.createElement(\"div\", {\n    className: showHideClassName,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 339\n    },\n    __self: this\n  }, children, React.createElement(\"button\", {\n    onClick: handleClose,\n    className: \"modal-button\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 341\n    },\n    __self: this\n  }, \"close\"));\n};\n\nvar container = document.createElement('div');\ndocument.body.appendChild(container); // ReactDOM.render(<App />, container);\n\nexport default MainPic;\n\nvar AddAnswer =\n/*#__PURE__*/\nfunction (_Component2) {\n  _inherits(AddAnswer, _Component2);\n\n  function AddAnswer() {\n    var _this6;\n\n    _classCallCheck(this, AddAnswer);\n\n    _this6 = _possibleConstructorReturn(this, _getPrototypeOf(AddAnswer).call(this));\n\n    _this6.handleSubmit = function (event) {\n      event.preventDefault();\n      var fd = new FormData();\n      fd.append('answer', _this6.state.answer);\n      fd.append('imageId', _this6.props.imageId);\n      fd.append('user_id', _this6.props.user.userId);\n      fd.append('sessionvalue', _this6.props.user.sessionvalue);\n      document.getElementById('answerbox').value = '';\n      fetch(_this6.props.DATA_URI + '/answer', {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json'\n        },\n        credentials: 'same-origin',\n        body: fd\n      }).then(function (response) {\n        return response.json();\n      }).then(function (data) {\n        if (data.error) {\n          _this6.setState({\n            warning: data.error\n          });\n\n          return null;\n        } else {\n          _this6.setState({\n            warning: ''\n          });\n        } //  this.props.refresh();\n\n      }).catch(function (error) {\n        _this6.setState({\n          warning: 'There was a problem uploading the file'\n        });\n\n        console.log(error);\n      });\n    };\n\n    _this6.handleChange = function (event) {\n      _this6.setState({\n        answer: event.target.value\n      });\n    };\n\n    _this6.scrollToMyRef = function () {\n      window.scrollTo({\n        top: _this6.myRef.current.OffsetTop,\n        behavior: \"smooth\"\n      });\n    };\n\n    _this6.state = {\n      answer: '',\n      warning: ''\n    };\n    return _this6;\n  } // doesn't this really belong in Answer?\n  // if you submit a blank answer after another non-blank answer\n  // it repeats the same answer\n\n\n  _createClass(AddAnswer, [{\n    key: \"renderWarning\",\n    value: function renderWarning() {\n      if (this.state.warning) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 404\n          },\n          __self: this\n        }, React.createElement(\"font\", {\n          color: \"red\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 405\n          },\n          __self: this\n        }, this.state.warning), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 405\n          },\n          __self: this\n        }));\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        ref: this.myRef,\n        className: \"Answer-box\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 420\n        },\n        __self: this\n      }, this.renderWarning(), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 422\n        },\n        __self: this\n      }, \"What is it?\"), React.createElement(\"form\", {\n        onSubmit: this.handleSubmit,\n        className: \"Answer-box\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 423\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        onChange: this.handleChange,\n        id: \"answerbox\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 424\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"submit\",\n        value: \"Submit Answer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 425\n        },\n        __self: this\n      })), React.createElement(\"button\", {\n        type: \"button\",\n        onClick: this.showModal,\n        className: \"Answer-box\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 427\n        },\n        __self: this\n      }, \"Upload New Image\"));\n    }\n  }]);\n\n  return AddAnswer;\n}(Component);","map":{"version":3,"sources":["C:\\Users\\jayne\\dafuckisthis\\frontend\\src\\components\\MainPic.js"],"names":["React","Component","MainPic","props","handleResize","window","innerWidth","setState","appClass","picNav","showModal","show","hideModal","fetchData","handleFileChange","event","selectedFile","target","files","handleTextChange","caption","value","handleUpload","state","warning","fd","FormData","append","name","user","userId","sessionvalue","fetch","DATA_URI","method","headers","credentials","body","then","response","json","data","showFileUpload","showCaption","showPreview","imageId","image_id","image","setImageId","catch","error","handleCaption","capButton","triggerAnswers","trigger","unTriggerAnswers","handleNewImageChange","newImageId","setImage","preventDefault","console","log","selectedImage","isLoading","mainPicPath","mainPicCaption","flaskMessage","imagePath","showNext","showPrev","addEventListener","msg","message","imagePosition","direction","type","fontWeight","fontSize","fontStyle","leftArrow","handlePrevOrNext","rightArrow","sortPic","fetchdata","renderFileUpload","renderCaption","previewPic","Modal","handleClose","children","showHideClassName","container","document","createElement","appendChild","AddAnswer","handleSubmit","answer","getElementById","handleChange","scrollToMyRef","scrollTo","top","myRef","current","OffsetTop","behavior","renderWarning"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport './MainPic.css';\r\n\r\nclass MainPic extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      show: false,\r\n      isLoading: true,\r\n      mainPicPath : '',\r\n      mainPicCaption : '',\r\n      flaskMessage : '',\r\n      error: null,\r\n    //  imageId: null,\r\n      selectedFile: null,\r\n      showFileUpload: true,\r\n      showCaption: false,\r\n      capButton: 'Submit Caption',\r\n      showPreview: false,\r\n      imagePath: null,\r\n      trigger: 0,\r\n     // selectedImage: this.props.selectedImage, // this shouldn't happen\r\n      selectedImage: 'latest', // this shouldn't happen\r\n      showNext: true,\r\n      showPrev: true,\r\n      newImageId: '',\r\n      appClass : 'App',\r\n      picNav : 'Pic-wide',\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchData();\r\n    this.handleResize();\r\n    window.addEventListener('resize', this.handleResize);\r\n  }\r\n\r\n  handleResize = () => {\r\n    if (window.innerWidth < 1000) {\r\n      this.setState({ appClass : \"Narrow-format\", picNav : \"Pic-narraow\" });\r\n    } else {\r\n      this.setState({ appClass : \"Wide-format\", picNav : \"Pic-wide\" });\r\n    }\r\n  }\r\n\r\n  showModal = () => {\r\n    this.setState({ show: true });\r\n  }\r\n  \r\n  hideModal = () => {\r\n    this.setState({ show: false });\r\n    this.fetchData();\r\n  }\r\n\r\n  handleFileChange = event => {\r\n    this.setState( { selectedFile: event.target.files[0] } );\r\n  }\r\n\r\n  handleTextChange = event => {\r\n     this.setState({ caption: event.target.value });\r\n  }\r\n\r\n  handleUpload = () => {\r\n    // this is causing mainpic to rerender and I want to avoid that\r\n    // so I can keep the picture in the modal and add the caption\r\n    // I may need to move the modal out of mainpic to do this\r\n    if (!this.state.selectedFile) { \r\n      this.setState( { warning : 'No file selected' } );\r\n      return;\r\n    } else {\r\n      this.setState( { warning : null } );\r\n    }\r\n    const fd = new FormData();\r\n    fd.append('file', this.state.selectedFile, this.state.selectedFile.name);\r\n    fd.append('caption', this.state.caption);\r\n    fd.append('user_id', this.props.user.userId);\r\n    fd.append('sessionvalue', this.props.user.sessionvalue);\r\n    fetch( this.props.DATA_URI + '/upload_image', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n      },\r\n      credentials : 'same-origin',\r\n      body: fd\r\n    })\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n      // it should probably ask the user if it's ok\r\n      // maybe the image should even be saved in a temp dir\r\n      // and then moved when user says ok\r\n      this.setState( { \r\n        showFileUpload : false,\r\n        showCaption : true,\r\n        showPreview: true,\r\n        imageId : data.image_id,\r\n      //  imagePath : data.imagePath,\r\n      } );\r\n      // maybe this shouldn't be set yet?\r\n      // I think it's causing a refresh and closing the modal?\r\n       this.props.image.setImageId(data.image_id);\r\n    })\r\n    .catch((error) => { \r\n      this.setState( { warning : 'There was a problem uploading the file' } );\r\n    });\r\n  }\r\n\r\n  handleCaption = () => {\r\n    const fd = new FormData();\r\n    fd.append('caption', this.state.caption);\r\n    fd.append('imageId', this.props.image.imageId);\r\n    fetch( this.props.DATA_URI + '/caption', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n      }, \r\n      credentials : 'same-origin',\r\n      body: fd\r\n    })\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n      this.setState( { showFileUpload : false } );\r\n      this.setState( { capButton : 'Edit Caption' });\r\n    })\r\n    .catch((error) => { \r\n      this.setState( { warning : 'There was a problem adding the caption' } );\r\n    });\r\n  }\r\n\r\n  fetchData(msg='') {\r\n    fetch( this.props.DATA_URI + \"/get_image?imageId=\" + this.props.image.imageId\r\n       + \"&selected_image=\" + this.state.selectedImage + \"&user_id=\" \r\n       + this.props.user.userId + \"&sessionvalue=\" + this.props.user.sessionvalue, {\r\n      credentials : 'same-origin',\r\n      method: 'GET',\r\n      headers: { 'Accept': 'application/json', },\r\n\t})\r\n\t.then(response => response.json())\r\n         .then(data =>  {\r\n           this.setState( { \r\n             mainPicPath : data.imagePath,\r\n             mainPicCaption : data.caption,\r\n             flaskMessage : data.message,\r\n  //           imageId : data.image_id,\r\n           })\r\n           this.props.image.setImageId(data.image_id);\r\n           if (data.imagePosition === 'last') {\r\n             this.setState( { showNext : false, showPrev : true } );\r\n           } else if (data.imagePosition === 'first') {\r\n             this.setState( { showPrev : false, showNext : true } );\r\n           } else {\r\n             this.setState( { showPrev : true, showNext : true } );\r\n           }\r\n         })\r\n         .catch(error => {\r\n           this.setState({ error, isLoading: false});\r\n           console.log(\"error: \", error);\r\n           })\r\n  }\r\n\r\n  renderFileUpload() {\r\n    if (this.state.showFileUpload) {\r\n      return (\r\n        <div>\r\n        <font color='white'>Upload new pic</font><br />\r\n        <form onSubmit={this.handleUpload}>\r\n      <input type=\"file\" onChange={this.handleFileChange} name=\"file\" id=\"file\"/>\r\n      <label htmlFor=\"file\">Choose a file</label>\r\n      <input type=\"submit\" value=\"Upload\" />\r\n        </form>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderCaption() {\r\n    if (this.state.showCaption) {\r\n      return (\r\n        <div>\r\n      <input type=\"text\" onChange={this.handleTextChange}/>\r\n      <button onClick={this.handleCaption}>{this.state.capButton}</button>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  previewPic() {\r\n    if (this.state.showPreview) {\r\n      return (\r\n        <div>\r\n        <img src={this.props.DATA_URI + this.state.imagePath} alt=\"what is it img\" className=\"previewPic\" />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  triggerAnswers = (trigger) => {\r\n    this.setState( { trigger : 1 } );\r\n  }\r\n\t\t\t\r\n  unTriggerAnswers = (trigger) => {\r\n    if (this.state.trigger === 1) {\r\n      this.setState( { trigger : 0 } );\r\n    }\r\n  }\r\n  \r\n \r\n  handlePrevOrNext(direction) {\r\n    // should this be a component on its own to avoid unneccesary rerenders\r\n    // if this.state.selectedImage is user nd direction is previous or next\r\n    // need to get the next or previous from that user\r\n    // so need to send something more to api\r\n    if (this.state.selectedImage === 'user') { direction = \"user_\" + direction; }\r\n    fetch( this.props.DATA_URI + '/get_image?imageId='+this.props.image.imageId+\r\n      '&selected_image=' + direction + \"&user_id=\" + this.props.user.userId \r\n      + \"&sessionvalue=\" + this.props.user.sessionvalue, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n      },\r\n      credentials : 'same-origin',\r\n    })\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n      if (data.error) {\r\n        console.log(data.error);\r\n      } else {\r\n\tthis.setState( { \r\n             mainPicPath : data.imagePath,\r\n             mainPicCaption : data.caption,\r\n             flaskMessage : data.message,\r\n           //  imageId : data.image_id,\r\n        })\r\n        this.props.image.setImageId(data.image_id);\r\n      //  this.props.refresh();\r\n        if (data.imagePosition === 'last') {\r\n          this.setState( { showNext : false, showPrev : true } );\r\n\r\n        } else if (data.imagePosition === 'first') {\r\n          this.setState( { showPrev : false, showNext : true } );\r\n        } else {\r\n          this.setState( { showNext : true, showPrev : true } );\r\n        }\r\n//\tthis.props.refresh();\r\n      }\r\n    })\r\n    .catch((error) => { \r\n      this.setState( { warning : 'There was a problem getting that image.' } );\r\n\t  console.log(error);\r\n    });\r\n  }\r\n\r\n  sortPic(type) {\r\n    if (type === 'mostAnswers') { \r\n      this.setState( { selectedImage : 'most_answers' }, () => this.fetchData());\r\n    }\r\n    if (type === 'latest') { \r\n      this.setState( { selectedImage : 'latest' }, () => this.fetchData());\r\n    }\r\n    if (type === 'user') {\r\n      this.setState( { selectedImage : 'user' }, () => this.fetchData());\r\n    }\r\n  }\r\n\r\n  handleNewImageChange = event => {\r\n    this.setState({ newImageId : event.target.value });\r\n  }\r\n\r\n  setImage = (event) => {\r\n    event.preventDefault();\r\n        console.log(\"hi\");\r\n    this.props.image.setImageId(this.state.newImageId);\r\n    this.setState({ selectedImage : '' }, () => this.fetchData());\r\n  }\r\n\r\n\r\n  render() {\r\n   // console.log(window.document.getElementsByTagName('body')[0].clientWidth);\r\n  //  console.log(window.document.getElementsByTagName('body'));\r\n    var caption = {\r\n      fontWeight : 'normal',\r\n      fontSize : '16px',\r\n      fontStyle : 'italic',\r\n    }\r\n\r\n  var leftArrow = \r\n  <svg width=\"15\" height=\"10\" onClick={() => this.handlePrevOrNext(\"previous\")}>\r\n  <line x1=\"0\" y1=\"5\" x2=\"15\" y2=\"5\" stroke=\"#000000\" strokeWidth=\"3\" />\r\n  <line x1=\"0\" y1=\"5\" x2=\"10\" y2=\"0\" stroke=\"#000000\" strokeWidth=\"2\" />\r\n  <line x1=\"0\" y1=\"5\" x2=\"10\" y2=\"10\" stroke=\"#000000\" strokeWidth=\"2\" />\r\n</svg>;\r\n\r\n  var rightArrow = \r\n  <svg width=\"15\" height=\"10\" onClick={() => this.handlePrevOrNext(\"next\")}>\r\n  <line x1=\"0\" y1=\"5\" x2=\"15\" y2=\"5\" stroke=\"#000000\" strokeWidth=\"3\" />\r\n  <line x1=\"15\" y1=\"5\" x2=\"5\" y2=\"0\" stroke=\"#000000\" strokeWidth=\"2\" />\r\n  <line x1=\"15\" y1=\"5\" x2=\"5\" y2=\"10\" stroke=\"#000000\" strokeWidth=\"2\" />\r\n</svg>;\r\n\r\n\treturn(\r\n\t<div className={this.state.appClass}>\r\n          <div className={this.state.picNav}>\r\n          <button onClick={() => {this.sortPic('latest')}}>Most Recent</button>\r\n            <button onClick={() => {this.sortPic('mostAnswers')}}>Most Answers</button>\r\n      { (this.props.user.userId && (this.state.selectedImage !== 'user')) ? <button onClick={() => {this.sortPic('user')}}>Your Pics</button> : null }\r\n      { (this.props.user.userId && (this.state.selectedImage === 'user')) ? <button onClick={() => {this.sortPic('user')}}>All Pics</button> : null }\r\n              <br />\r\n          { this.state.showPrev ? <span>{leftArrow}<button onClick={() => {this.handlePrevOrNext('previous')}}>Prev</button>&nbsp;&nbsp;&nbsp;</span> : null }  { this.state.showNext ? <span>&nbsp;&nbsp;&nbsp;<button onClick={() => {this.handlePrevOrNext('next')}}>Next</button>{rightArrow}</span> : null }\r\n          </div>\r\n          <div className=\"Main-image\">\r\n          {this.state.mainPicPath && <img src={ this.props.DATA_URI + this.state.mainPicPath } alt='whatisthis' />}<br /> \r\n          </div>\r\n          <span style={caption}>\r\n\t\t{ this.state.mainPicCaption }\r\n  </span>\r\n        <br />\r\n         <AddAnswer DATA_URI={this.props.DATA_URI} user={this.props.user} imageId={this.props.image.imageId} triggerAnswers={this.triggerAnswers}/>\r\n         <Modal show={this.state.show} handleClose={this.hideModal} fetchdata={this.fetchdata} handleFileChange={this.handleFileChange} handleUpload={this.handleUpload} >\r\n                  {this.renderFileUpload()}\r\n                  {this.renderCaption()}\r\n                  {this.previewPic()}\r\n          </Modal>\r\n\t</div>\r\n\t);\r\n    /*\r\n          <br />\r\n          <font size=\"1\">(below is just temp - enter an imageId to get that image)</font>\r\n          <form onSubmit={this.setImage}>\r\n          <input type=\"text\" onChange={this.handleNewImageChange} />\r\n          <input type=\"submit\" value=\"submit\" />\r\n          </form>\r\n          */\r\n    }\r\n}\r\n\r\nconst Modal = ({ handleClose, fetchdata, handleFileChange, handleUpload, show, children }) => {\r\n  const showHideClassName = show ? \"modal display-block\" : \"modal display-none\";\r\n\r\n  return(\r\n    <div className={showHideClassName}>\r\n    {children}\r\n    <button onClick={handleClose} className=\"modal-button\">close</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst container = document.createElement('div');\r\ndocument.body.appendChild(container);\r\n// ReactDOM.render(<App />, container);\r\n\r\nexport default MainPic\r\n\r\nclass AddAnswer extends Component {\r\n\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      answer: '',\r\n      warning: '',\r\n    }\r\n  }\r\n  \r\n  // doesn't this really belong in Answer?\r\n  // if you submit a blank answer after another non-blank answer\r\n  // it repeats the same answer\r\n  handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    const fd = new FormData();\r\n    fd.append('answer', this.state.answer);\r\n    fd.append('imageId', this.props.imageId);\r\n    fd.append('user_id', this.props.user.userId);\r\n    fd.append('sessionvalue', this.props.user.sessionvalue);\r\n    document.getElementById('answerbox').value = '';\r\n    fetch( this.props.DATA_URI + '/answer', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n      },\r\n      credentials : 'same-origin',\r\n      body: fd, \r\n    })\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n          if (data.error) {\r\n            this.setState( { warning : data.error } );\r\n            return null;\r\n          } else {\r\n            this.setState( { warning : '' } );\r\n          }\r\n\t//  this.props.refresh();\r\n    })\r\n    .catch((error) => { \r\n      this.setState( { warning : 'There was a problem uploading the file' } );\r\n\t  console.log(error);\r\n    });\r\n  }\r\n\r\n  handleChange = event => {\r\n     this.setState({ answer: event.target.value });\r\n  }\r\n\r\n  renderWarning() {\r\n    if (this.state.warning) {\r\n      return(\r\n        <div>\r\n        <font color='red'>{this.state.warning}</font><br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  scrollToMyRef = () => {\r\n    window.scrollTo({\r\n      top:this.myRef.current.OffsetTop,\r\n      behavior: \"smooth\"\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return(\r\n      <div ref={this.myRef} className=\"Answer-box\">\r\n      {this.renderWarning()}\r\n      <div>What is it?</div>\r\n      <form onSubmit={this.handleSubmit} className=\"Answer-box\">\r\n      <input type=\"text\" onChange={this.handleChange} id=\"answerbox\"/>\r\n      <input type=\"submit\" value=\"Submit Answer\" />\r\n      </form>\r\n      <button type=\"button\" onClick={this.showModal} className=\"Answer-box\">\r\n      Upload New Image\r\n      </button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}